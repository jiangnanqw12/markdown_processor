"generate_markmind_config.py": "'\nimport os\nimport shutil\nimport time\nimport re\ndef make_mindmap_file(cwd):\n\t# make a new file in the current directory named mindmap.md\n\tstr_mindmap_rich = \'\'\'\n---\nmindmap-plugin: rich\n---\n# Root\n``` json\n{"mindData":[[{"id":"4c8a77d7-a9e3-96ca","text":"Root","isRoot":true,"main":true,"x":4000,"y":4000,"isExpand":true,"layout":{"layoutName":"mindmap2","direct":"right"},"stroke":""}]],"induceData":[],"wireFrameData":[],"relateLinkData":[],"calloutData":[]}\n```\n\'\'\'\n\tstr_mindmap_basic = \'\'\'\n---\nmindmap-plugin: basic\n---\n\'\'\'\n\twith open(os.path.join(cwd, \'mindmap_rich.md\'), \'w\', encoding=\'utf-8\') as f_mindmap_rich:\n\t\tf_mindmap_rich.write(str_mindmap_rich)\n\twith open(os.path.join(cwd, \'mindmap_basic.md\'), \'w\', encoding=\'utf-8\') as f_mindmap_basic:\n\t\tf_mindmap_basic.write(str_mindmap_basic)\n\t# f_mindmap_rich = open(cwd + \'/mindmap_rich.md\', \'w\', encoding=\'utf-8\')\n\t# f_mindmap_rich.write(str_mindmap_rich)\n\t# f_mindmap_rich.close()\n\t# f_mindmap_basic = open(cwd + \'/mindmap_basic.md\', \'w\', encoding=\'utf-8\')\n\t# f_mindmap_basic.write(str_mindmap_basic)\n\t# f_mindmap_basic.close()\ndef make_mindmap_basic_file(cwd,file_name_without_pdf):\n\t# make a new file in the current directory named mindmap.md\n\tstr_mindmap_basic = \'\'\'\n---\nmindmap-plugin: basic\n---\n\'\'\'\n\twith open(os.path.join(cwd, file_name_without_pdf+\'_mindmap_basic.md\'), \'w\', encoding=\'utf-8\') as f_mindmap_basic:\n\t\tf_mindmap_basic.write(str_mindmap_basic+"# "+file_name_without_pdf)\ndef remove_chinese_characters(text):\n\t# 匹配中文字符的正则表达式\n\tchinese_pattern = re.compile("[\\u4e00-\\u9fa5]+")\n\t# 将中文字符替换为空字符串\n\tresult = chinese_pattern.sub("", text)\n\treturn result\ndef create_annotator_4pdf_file(file_name_with_endswith_pdf,f_annotate,cwd_after_obsidian_workspace):\n\t# get the file name without the .pdf\n\tfile_name_without_pdf = file_name_with_endswith_pdf[:-4]\n\ttimestamp = int(time.time())\n\t# replace the space in the file name with underscore\n\tfile_name_without_space = file_name_without_pdf.replace(\' \', \'_\')\n\tfile_name_without_space = remove_chinese_characters(file_name_without_space)\n\tcwd_after_obsidian_workspace2 = cwd_after_obsidian_workspace.replace(\n\t\t" ", "_")\n\tcwd_after_obsidian_workspace2 = cwd_after_obsidian_workspace2.replace(\n\t\t"/", "_")\n\tcwd_after_obsidian_workspace2 = cwd_after_obsidian_workspace2.replace(\n\t\t"=", "_")\n\tcwd_after_obsidian_workspace2=remove_chinese_characters(cwd_after_obsidian_workspace2)\n\t# Traversal the current directory\n\tf_annotate.write(\'---\\n\')\n\tf_annotate.write("annotate-target: " + cwd_after_obsidian_workspace +\n\t\t\t\t\t "/assets/pdfs/" + file_name_with_endswith_pdf + "\\n")\n\tf_annotate.write("annotate-type: pdf\\n")\n\tf_annotate.write("annotate-image-target: " +\n\t\t\t\t\t cwd_after_obsidian_workspace + "/assets/imgs\\n")\n\tf_annotate.write("id: "  +\n\t\t\t\t\t file_name_without_space+"\\n")\n\tf_annotate.write("---\\n")\ndef create_floder(cwd):\n\t# if in the current folder there is a folder named assets\n\tif os.path.isdir(cwd + \'/assets\'):\n\t\tpass\n\telse:\n\t\t# make a new folder in the current directory named assets\n\t\tos.mkdir(cwd + \'/assets\')\n\tif os.path.isdir(cwd + \'/assets/imgs\'):\n\t\tpass\n\telse:\n\t\t# make a new folder in the assets folder named images\n\t\tos.mkdir(cwd + \'/assets/imgs\')\n\tif os.path.isdir(cwd + \'/assets/pdfs\'):\n\t\tpass\n\telse:\n\t\tos.mkdir(cwd + \'/assets/pdfs\')\ndef main():\n\t# get current working directory\n\tcwd = os.getcwd()\n\t# replace all the \\ with /\n\tcwd = cwd.replace(\'\\\\\', \'/\')\n\t# print(cwd)\n\tobsidian_workspace = "KG/"\n\t# get cwd after obsidian_workspace\n\tcwd_after_obsidian_workspace = cwd.split(obsidian_workspace)[1]\n\tprint(cwd_after_obsidian_workspace)\n\t# get current folder name\n\tcreate_floder(cwd)\n\t# get all the files in the current directory\n\tfiles = os.listdir(cwd)\n\t# loop through all the files in the current directory\n\tfor file in files:\n\t\t# if the file is a pdf file\n\t\tif file.endswith(\'.pdf\'):\n\t\t\t# get current file name without filename extension\n\t\t\tfile_name_without_pdf = file[:-4]\n\t\t\tfile_name_without_pdf_without_timestamp=file_name_without_pdf.split("_")[0]\n\t\t\tsrc_file = os.path.join(cwd, file)\n\t\t\tdest_file = os.path.join(cwd, \'assets\', \'pdfs\', file)\n\t\t\tif not os.path.isfile(dest_file):\n\t\t\t\t# copy the pdf file to the pdfs folder in the assets folder\n\t\t\t\tshutil.copy(src_file, dest_file)\n\t\t\tannotate_file = os.path.join(cwd, \'assets\', \'pdfs\', f"{file_name_without_pdf}_annotate.md")\n\t\t\tif not os.path.isfile(annotate_file):\n\t\t\t\twith open(annotate_file, \'w\', encoding=\'utf-8\') as f_annotate:\n\t\t\t\t\tcreate_annotator_4pdf_file(file, f_annotate, cwd_after_obsidian_workspace)\n\t\t\tmindmap_basic_file=os.path.join(cwd, file_name_without_pdf+\'_mindmap_basic.md\')\n\t\t\tif not os.path.isfile(mindmap_basic_file):\n\t\t\t\tmake_mindmap_basic_file(cwd,file_name_without_pdf)\n\t\t\t# check if there is a file named file_name_without_pdf + \'_annotate.md\' exists\n\t\t\t# if not os.path.isfile(cwd + \'/assets/pdfs/\' + file_name_without_pdf + \'_annotate.md\'):\n\t\t\t#\t f_annotate = open(cwd + \'/assets/pdfs/\' + file_name_without_pdf + \'_annotate.md\', \'w\', encoding=\'utf-8\')\n\t\t\t#\t create_annotator_4pdf_file(file,f_annotate,cwd_after_obsidian_workspace)\n\t\t\t# print(pdf_file_name)\nif __name__ == \'__main__\':\n\tmain()\n'",
