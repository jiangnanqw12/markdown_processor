"file_operations_utils.py": "'import os\nimport re\nimport time\nimport pyperclip\nimport glob\nimport subprocess\ndef get_father_path(path):\n\treturn os.path.dirname(path)\ndef create_directory_assets_imgs():\n\tdirs = [\n\t\t"assets/imgs",\n\t\t"assets/vids"\n\t]\n\tfor directory in dirs:\n\t\tif not os.path.exists(directory):\n\t\t\tos.makedirs(directory)\n\t\t\tprint(f"Created directory: {directory}")\n\t\telse:\n\t\t\tprint(f"Directory already exists: {directory}")\ndef create_directory_assets_concept_structure():\n\tdirs = [\n\t\t"assets",\n\t\t"assets/imgs",\n\t\t"assets/lectures",\n\t\t"assets/papers",\n\t\t"lectures",\n\t\t"papers",\n\t]\n\tfor directory in dirs:\n\t\tif not os.path.exists(directory):\n\t\t\tos.makedirs(directory)\n\t\t\tprint(f"Created directory: {directory}")\n\t\telse:\n\t\t\tprint(f"Directory already exists: {directory}")\ndef open_folder_in_windows(folder_path):\n\t"""Open a folder in Windows File Explorer based on the folder path.\n\tArgs:\n\tfolder_path (str): The folder path to open.\n\tReturns:\n\tNone\n\t"""\n\tif os.path.exists(folder_path):\n\t\tos.startfile(folder_path)\n\telse:\n\t\tprint(f"Folder path {folder_path} does not exist.")\ndef open_b_assets_folder(cwd=None):\n\tif cwd is None:\n\t\tcwd = os.getcwd()\n\tprint(cwd)\n\tif cwd.find("OneDrive") == -1:\n\t\traise Exception("This script is only for use with OneDrive.")\n\tassets_path_front = "C:/BaiduSyncdisk/assets"\n\t# Split the path after \'KG\' and replace backslashes with forward slashes\n\tkg_path_back = cwd.split("\\\\KG")[1].replace("\\\\", "/")\n\t# Remove the leading forward slash from kg_path_back\n\tkg_path_back = kg_path_back.lstrip("/")\n\tassets_path = os.path.join(assets_path_front, kg_path_back)\n\tif assets_path.find("BaiduSyncdisk") == -1:\n\t\traise Exception("The assets path is not in BaiduSyncdisk.")\n\topen_folder_in_windows(assets_path)\ndef perform_regex_rename_on_files(reg_string_list, path=None, files=None):\n\tif path is None:\n\t\tpath = os.getcwd()\n\tif files is None:\n\t\tfiles = os.listdir(path)\n\tfor file in files:\n\t\tfor reg_string in reg_string_list:\n\t\t\tmatch = re.search(reg_string[0], file)\n\t\t\tif match is not None:\n\t\t\t\tnew_file = re.sub(reg_string[0], reg_string[1], file)\n\t\t\t\ttry:\n\t\t\t\t\tos.rename(file, new_file)\n\t\t\t\t\tprint(f"Renamed \'{file}\' to \'{new_file}\'")\n\t\t\t\texcept OSError as e:\n\t\t\t\t\tprint(f"Error renaming \'{file}\' to \'{new_file}\': {e}")\ndef rename_files_in_directories(base_path=None):\n\trename_files_in_directories_orders(order=2)\ndef rename_files_in_directories_orders(base_path=None, order=0):\n\timport flags_utils\n\tflags = flags_utils.get_flag_default()\n\tTR_MODE = flags.get_flag("TR_MODE")\n\t"""\n\tRename all files in numbered directories within the base path.\n\tEach file is prefixed with the directory number, zero-padded to three digits.\n\t"""\n\t# Use the current working directory if no path is provided\n\tbase_path = base_path or os.getcwd()\n\t# Validate the base path\n\tif not os.path.isdir(base_path):\n\t\tprint(f"The provided path \'{base_path}\' is not a valid directory.")\n\t\treturn\n\tif order == 0:\n\t\t"""\n\t\t/index/*.mp4\n\t\t\tto\n\t\t\t/index_*.mp4\n\t\t"""\n\t\tfiles = os.listdir(base_path)\n\t\tfiles_mp4 = []\n\t\tfor f in files:\n\t\t\tif f.endswith(".mp4"):\n\t\t\t\tfiles_mp4.append(f)\n\t\tfor index in range(16):\n\t\t\tstart_str = f"{16 - index:03d}_"\n\t\t\tfor file_mp4 in files_mp4:\n\t\t\t\tif file_mp4.startswith(start_str):\n\t\t\t\t\tnew_file = f"{1+index:03d}{file_mp4[3:]}"\n\t\t\t\t\tos.rename(os.path.join(base_path, file_mp4),\n\t\t\t\t\t\t\t  os.path.join(base_path, new_file))\n\telif order == 1:\n\t\t"""\n\t/index/*.mp4\n\tto\n\t/16-index_*.mp4\n\t"""\n\t\tfor index in range(16):\n\t\t\tdir_path = os.path.join(base_path, f"{16 - index}")\n\t\t\t# Check if the directory exists\n\t\t\tif not os.path.isdir(dir_path):\n\t\t\t\tprint(f"Directory \'{dir_path}\' does not exist. Skipping.")\n\t\t\t\tcontinue\n\t\t\ttry:\n\t\t\t\tfor file in os.listdir(dir_path):\n\t\t\t\t\told_file_path = os.path.join(dir_path, file)\n\t\t\t\t\t# Zero-padded prefix\n\t\t\t\t\tnew_file_name = f"{16 - index:03d}_{file}"\n\t\t\t\t\tnew_file_path = os.path.join(base_path, new_file_name)\n\t\t\t\t\tos.rename(old_file_path, new_file_path)\n\t\t\t\t\tprint(f"Renamed \'{old_file_path}\' to \'{new_file_path}\'")\n\t\t\texcept OSError as e:\n\t\t\t\tprint(f"Error renaming files in \'{dir_path}\': {e}")\n\telif order == 2:\n\t\t"""\n\t\tcs50 note\n\t\t999_index\n\t\tWeek (\\d{1,3}) (.+)\n\t\t+\n\t\tLecture (\\d{1,3}) - CS50x 2023\\.md\n\t\t-->\n\t\tf"{lecture_number+1:03d}_{lecture[lecture_number]}.md"\n\t\t"""\n\t\twith open(os.path.join(base_path, "999_index.md"), "r") as f:\n\t\t\tindex_list = f.read().splitlines()\n\t\tlecture = dict()\n\t\tfor index in index_list:\n\t\t\treg = r"Week (\\d{1,3}) (.+)"\n\t\t\tmatch = re.match(reg, index)\n\t\t\tif match:\n\t\t\t\tweek_number = int(match.group(1))\n\t\t\t\tweek_name = match.group(2).strip()\n\t\t\t\tlecture[week_number] = week_name\n\t\t\t\tif TR_MODE:\n\t\t\t\t\tprint(f"Week {week_number} - {week_name}")\n\t\tfiles_md = [f for f in os.listdir(base_path) if f.endswith(".md")]\n\t\tfor file in files_md:\n\t\t\treg = r"Lecture (\\d{1,3}) - CS50x 2023\\.md"\n\t\t\tmatch = re.match(reg, file)\n\t\t\tif match:\n\t\t\t\tlecture_number = int(match.group(1))\n\t\t\t\tif TR_MODE:\n\t\t\t\t\tprint(f"Lecture {lecture_number}")\n\t\t\t\tnew_file_name = f"{lecture_number+1:03d}_{lecture[lecture_number]}.md"\n\t\t\t\tif TR_MODE:\n\t\t\t\t\tprint(f"Renaming {file} to {new_file_name}")\n\t\t\t\tos.rename(os.path.join(base_path, file),\n\t\t\t\t\t\t  os.path.join(base_path, new_file_name))\ndef rename_files_in_directories_1(base_path=None):\n\tfor index in range(16):\n\t\tdir_path = os.path.join(base_path, f"{16 - index}")\n\t\t# Check if the directory exists\n\t\tif not os.path.isdir(dir_path):\n\t\t\tprint(f"Directory \'{dir_path}\' does not exist. Skipping.")\n\t\t\tcontinue\n\t\ttry:\n\t\t\tfor file in os.listdir(dir_path):\n\t\t\t\told_file_path = os.path.join(dir_path, file)\n\t\t\t\t# Zero-padded prefix\n\t\t\t\tnew_file_name = f"{16 - index:03d}_{file}"\n\t\t\t\tnew_file_path = os.path.join(base_path, new_file_name)\n\t\t\t\tos.rename(old_file_path, new_file_path)\n\t\t\t\tprint(f"Renamed \'{old_file_path}\' to \'{new_file_path}\'")\n\t\texcept OSError as e:\n\t\t\tprint(f"Error renaming files in \'{dir_path}\': {e}")\ndef get_current_timestamp():\n\ttimestamp = int(time.time())\n\tprint(timestamp)\n\treturn timestamp\ndef add_timestamp_to_filenames():\n\tcurrent_dir = os.getcwd()\n\ttimestamp = int(time.time())\n\tprint("add_timestamp is : ", timestamp)\n\tfor filename in os.listdir(current_dir):\n\t\tif os.path.isfile(os.path.join(current_dir, filename)) and not filename.endswith(".py"):\n\t\t\tfilename_without_ext, ext = os.path.splitext(filename)\n\t\t\tnew_filename = f"{filename_without_ext}_{timestamp}{ext}"\n\t\t\tos.replace(os.path.join(current_dir, filename),\n\t\t\t\t\t   os.path.join(current_dir, new_filename))\ndef get_Topic_in_kg(TR_MODE=0):\n\tassets_sub_topic1_to_sub_topicn_folder_list, OneDrive_KG_note_root_directory_path = get_kg_assets_root()\n\tif TR_MODE:\n\t\tprint("assets_sub_topic1_to_sub_topicn_folder_list:",\n\t\t\t  assets_sub_topic1_to_sub_topicn_folder_list)\n\t\tprint("OneDrive KG root directory_path:",\n\t\t\t  OneDrive_KG_note_root_directory_path)\n\tTopic = os.path.basename(OneDrive_KG_note_root_directory_path)\n\tif TR_MODE:\n\t\tprint("Topic:", Topic)\n\tnum_topic = len(assets_sub_topic1_to_sub_topicn_folder_list)\n\treg_sub1 = [r\'\\d{3}_(.+)\', r\'\\1\']\n\tif num_topic < 1:\n\t\tsub_topic1 = None\n\telif num_topic >= 1:\n\t\tsub_topic1 = assets_sub_topic1_to_sub_topicn_folder_list[0]\n\t\tmatch = re.search(reg_sub1[0], sub_topic1)\n\t\tif match:\n\t\t\tsub_topic1 = re.sub(reg_sub1[0], reg_sub1[1], sub_topic1)\n\t\t\tif TR_MODE:\n\t\t\t\tprint("sub_topic1:", sub_topic1)\n\treturn Topic, sub_topic1\ndef perform_regex_replacement_on_files(reg_string_list, path=None, files=None):\n\tif path is None:\n\t\tpath = os.getcwd()\n\tif files is None:\n\t\tfiles = os.listdir(path)\n\tfor file in files:\n\t\twith open(os.path.join(path, file), "r", encoding="utf-8") as f1:\n\t\t\tcontent = f1.read()\n\t\tfor regex in reg_string_list:\n\t\t\tcontent = re.sub(regex[0], regex[1], content)\n\t\twith open(os.path.join(path, file), "w", encoding="utf-8") as f:\n\t\t\tf.write(content)\ndef perform_regex_replacement_on_files_tree(reg_string_list, path=None):\n\tif path is None:\n\t\tpath = os.getcwd()\n\tfor root, dirs, files in os.walk(path):\n\t\tfor file in files:\n\t\t\tfile_path = os.path.join(root, file)\n\t\t\twith open(file_path, "r", encoding="utf-8") as f1:\n\t\t\t\tcontent = f1.read()\n\t\t\tnew_content = content\n\t\t\tfor regex in reg_string_list:\n\t\t\t\tnew_content = re.sub(regex[0], regex[1], new_content)\n\t\t\tif new_content != content:\n\t\t\t\twith open(file_path, "w", encoding="utf-8") as f:\n\t\t\t\t\tf.write(new_content)\ndef get_bvids_origin_topic_path(Topic, TR_MODE=0):\n\t# bvids_origin_topic_path = get_bvids_origin_topic_path(BaiduSyncdisk_assets_root)\n\t# bvids_origin_topic_path = r"C:\\BaiduSyncdisk\\Multivariable_calculus_Khan_Academy_youtube"\n\t# bvids_origin_topic_path=r\'C:\\BaiduSyncdisk\\First Principles of Computer Vision Specialization\\Features and Boundaries\'\n\tbvids_origin_topic_path = r\'C:\\BaiduSyncdisk\\00_MOOC_b\'\n\t# bvids_origin_topic_path=r\'C:\\BaiduSyncdisk\\deep\'\n\t# bvids_origin_topic_path=r\'C:\\BaiduSyncdisk\\Introduction\'\n\tif Topic is None:\n\t\traise Exception("Topic is None")\n\tbvids_origin_topic_path = os.path.join(\n\t\tbvids_origin_topic_path, Topic)\n\tif TR_MODE:\n\t\tprint("bvids_origin_topic_path:", bvids_origin_topic_path)\n\t# if os.path.basename(bvids_origin_topic_path) != Topic:\n\t#\t print("bvids_origin_topic_path:", bvids_origin_topic_path)\n\t#\t print("Topic:", Topic)\n\t#\t raise Exception("Topic name not match")\n\treturn bvids_origin_topic_path\ndef get_kg_assets_root(current_dir=None):\n\t\'\'\'\n\t\'\'\'\n\tTR_MODE = 1\n\tif current_dir is None:\n\t\tcurrent_dir = os.getcwd()\n\tsub_topic1_to_sub_topicn_folder_list = []\n\twhile True:\n\t\tif \'assets\' in os.listdir(current_dir):\n\t\t\tsub_topic1_to_sub_topicn_folder_list.reverse()\n\t\t\treturn sub_topic1_to_sub_topicn_folder_list, current_dir\n\t\telse:\n\t\t\tsub_topic1_to_sub_topicn_folder_list.append(\n\t\t\t\tos.path.basename(current_dir))\n\t\t\tcurrent_dir = os.path.dirname(current_dir)\ndef create_file_subtitle_summary_gpt_md(path=None):\n\t# Create a file named subtitle.md and summary_gpt.md\n\tprint("create_file_subtitle_summary_gpt_md")\n\tif path is None:\n\t\tpath = os.getcwd()\n\ttime_stamp = int(time.time())\n\twith open(os.path.join(path, "subtitle_"+str(time_stamp)+".md"), "w") as f:\n\t\tpass\n\twith open(os.path.join(path, "summary_gpt_"+str(time_stamp)+".md"), "w") as f:\n\t\tpass\n\twith open(os.path.join(path, "timestamps_"+str(time_stamp)+".md"), "w") as f:\n\t\tpass\ndef get_note_assets_dir_path(sub_topic1_to_sub_topicn_folder_list, current_dir):\n\t# sub_topic1_to_sub_topicn_folder_list.append(os.path.basename(current_dir))\n\t# current_dir = os.path.dirname(current_dir)\n\twhile True:\n\t\tif \'assets\' in os.listdir(current_dir):\n\t\t\tsub_topic1_to_sub_topicn_folder_list.reverse()\n\t\t\tif sub_topic1_to_sub_topicn_folder_list != []:\n\t\t\t\tnote_assets_dir_path = os.path.join(current_dir, \'assets\')\n\t\t\t\tfor folder_name in sub_topic1_to_sub_topicn_folder_list:\n\t\t\t\t\tnote_assets_dir_path = os.path.join(\n\t\t\t\t\t\tnote_assets_dir_path, folder_name)\n\t\t\t\t\t# print(note_assets_dir_path)\n\t\t\t\t\t# if os.path.isdir(note_assets_dir_path):\n\t\t\t\t\tif not os.path.exists(note_assets_dir_path):\n\t\t\t\t\t\tos.makedirs(note_assets_dir_path)\n\t\t\t\treturn note_assets_dir_path\n\t\t\t\t# else:\n\t\t\t\t#\t raise Exception(\'not a directory \',note_assets_dir_path)\n\t\t\telse:\n\t\t\t\traise Exception("No folder name found")\n\t\t\tbreak\n\t\telse:\n\t\t\tsub_topic1_to_sub_topicn_folder_list.append(\n\t\t\t\tos.path.basename(current_dir))\n\t\t\tcurrent_dir = os.path.dirname(current_dir)\ndef initialize_notes_files_structure():\n\tTR_mode = 1\n\ttimestamp = int(time.time())\n\t# Get the current directory\n\tcurrent_directory = os.getcwd()\n\tif TR_mode:\n\t\tprint(f"Current directory: {current_directory}")\n\t# Get the parent directory\n\tparent_directory = os.path.dirname(current_directory)\n\tif TR_mode:\n\t\tprint(f"Parent directory: {parent_directory}")\n\t\t# Get the name of the current directory\n\tcurrent_directory_name = os.path.basename(current_directory)\n\tif TR_mode:\n\t\tprint(f"Current directory name: {current_directory_name}")\n\t# Get the name of the parent directory\n\tparent_directory_name = os.path.basename(parent_directory)\n\tif TR_mode:\n\t\tprint(f"Parent directory name: {parent_directory_name}")\n\tstart_file = "000_"+current_directory_name+"_"+parent_directory_name+".md"\n\tif TR_mode:\n\t\tprint(f"start_file: {start_file}")\n\t# Check if file exists, if not create it\n\tstart_file__directory = os.path.join(current_directory, start_file)\n\tif not os.path.exists(start_file__directory):\n\t\twith open(start_file__directory, \'w\') as f:\n\t\t\tf.write(\'\')  # creating an empty markdown file\n\tstring_list = current_directory_name.split("_")\n\tlen_string_list = len(string_list)\n\tif len_string_list < 1:\n\t\traise ValueError("len error")\n\telif len_string_list == 1:\n\t\tif len(string_list[0]) < 2:\n\t\t\traise ValueError("len error")\n\t\tfolder_b_assets = string_list[0][0] + \\\n\t\t\tstring_list[-1][-1]+"_"+str(timestamp)\n\telif len_string_list > 1:\n\t\tfolder_b_assets = string_list[0][0] + \\\n\t\t\tstring_list[-1][0]+"_"+str(timestamp)\n\tif TR_mode:\n\t\tprint("folder_b_assets: ", folder_b_assets)\n\tassets_directory = os.path.join(current_directory, "assets")\n\t# Check if \'assets\' directory exists, if not create it\n\tif not os.path.exists(assets_directory):\n\t\tos.mkdir(assets_directory)\n\t\tif TR_mode:\n\t\t\tprint(f"\'assets\' directory created in {current_directory}")\n\tb_assets_directory = os.path.join(assets_directory, folder_b_assets)\n\tif not os.path.exists(b_assets_directory):\n\t\tos.mkdir(b_assets_directory)\n\t\tif TR_mode:\n\t\t\tprint(\n\t\t\t\tf"b_assets_directory directory created in {b_assets_directory}")\n\tfile_git_ignore = os.path.join(b_assets_directory, ".gitignore")\n\tif not os.path.exists(file_git_ignore):\n\t\twith open(file_git_ignore, \'w\') as f:\n\t\t\tf.write(\'*.flv\\n*.mp4\\n*.srt\\n*.vtt\\n*.pdf\\n*.epub\\n*.pptx\\n\')\n\tfile_readme = os.path.join(b_assets_directory, "readme.md")\n\tif not os.path.exists(file_readme):\n\t\twith open(file_readme, \'w\') as f:\n\t\t\tf.write(current_directory_name+"\\n")\ndef rename_folders_4_mooc_b(path=None, zfill_num=3):\n\tif path is None:\n\t\tpath = os.getcwd()\n\timport flags_utils\n\tFlags = flags_utils.GlobalFlags()\n\tFlags.set_flag(\'TR_MODE\', 1)\n\tTR_MODE = Flags.get_flag(\'TR_MODE\')\n\t# files_mp4 = [f for f in os.listdir(\n\t#\t path) if f.endswith(".mp4")]\n\t# files_vtt = [f for f in os.listdir(\n\t#\t path) if f.endswith(".vtt")]\n\t# files_srt = [f for f in os.listdir(\n\t#\t path) if f.endswith(".srt")]\n\tfiles = os.listdir(path)\n\t# for file_mp4 in files_mp4:\n\t# r"How Ultrasonic Energy is Created _ Science of Energy Ep. 1 _ Ethicon-Bd2xISKVyFc.mp4"\n\tr"Monopolar Electrosurgery Technology and Principles - Science of Energy Ep. 5 - E.en.srt"\n\treg_string_vid1 = [\n\t\tr\'(.+) ｜ Fuzzy Logic.+Part (\\d{1,2})\\.mp4\', \'\']\n\treg_string_sub1 = [\n\t\tr"(.+) ｜ Fuzzy Logic.+Part (\\d{1,2})(\\.en|\\.eng|\\.zh|\\.cn|\\.zho|\\.chi|\\.zh-Hans|\\.zh-Hant|)-eEY6OEpapPo(\\.vtt|\\.srt)", r\'\\1\']\n\treg_string_vid2 = [\n\t\tr\'(.+) - Science of Energy Ep. (\\d{1,2}) -.+\\.mp4\', \'\']\n\treg_string_sub2 = [\n\t\tr"(.+) - Science of Energy Ep. (\\d{1,2}) -.+\\.en\\.srt", r\'\\1\']\n\treg_sring_vid = reg_string_vid1\n\treg_sring_sub = reg_string_sub1\n\tfor file in files:\n\t\tmatch = re.search(reg_sring_vid[0], file)\n\t\tif match:\n\t\t\tseries_num = match.group(2)\n\t\t\tseries_num = series_num.zfill(zfill_num)\n\t\t\treg_string_vid_replace = series_num+"_"+r"\\1"+".mp4"\n\t\t\tif TR_MODE:\n\t\t\t\tprint("reg_string_vid_replace is:", reg_string_vid_replace)\n\t\t\tfile_name = re.sub(reg_sring_vid[0], reg_string_vid_replace, file)\n\t\t\tif TR_MODE:\n\t\t\t\tprint(file_name)\n\t\t\tos.rename(os.path.join(path, file), os.path.join(\n\t\t\t\tpath, file_name))\n\t\tmatch = re.search(reg_sring_sub[0], file)\n\t\tif match:\n\t\t\tseries_num = match.group(2)\n\t\t\tseries_num = series_num.zfill(zfill_num)\n\t\t\treg_string_sub_replace = series_num+"_"+r"\\1"+r"\\3"+r"\\4"\n\t\t\tif TR_MODE:\n\t\t\t\tprint("reg_string_sub_replace is:\\n", reg_string_sub_replace)\n\t\t\tfile_name = re.sub(reg_sring_sub[0], reg_string_sub_replace, file)\n\t\t\tif TR_MODE:\n\t\t\t\tprint("file_name is :\\n", file_name)\n\t\t\tos.rename(os.path.join(path, file), os.path.join(\n\t\t\t\tpath, file_name))\ndef zfill_folder_files(path=None, zfill_num=3):\n\tif path is None:\n\t\tpath = os.getcwd()\n\tfiles = [f for f in os.listdir(\n\t\tpath) if os.path.isfile(os.path.join(path, f))]\n\tfor file in files:\n\t\tfile_name, file_ext = os.path.splitext(file)\n\t\tfile_name_zfilled = file_name.zfill(zfill_num)\n\t\tos.rename(os.path.join(path, file), os.path.join(\n\t\t\tpath, file_name_zfilled + file_ext))\n\tdirs = [f for f in os.listdir(\n\t\tpath) if os.path.isdir(os.path.join(path, f))]\n\tfor dir in dirs:\n\t\tdir_name, dir_ext = os.path.splitext(dir)\n\t\tdir_name_zfilled = dir_name.zfill(zfill_num)\n\t\tos.rename(os.path.join(path, dir), os.path.join(\n\t\t\tpath, dir_name_zfilled + dir_ext))\ndef get_kg_bassets_folder_keyword():\n\tTR_MODE = 1\n\tsub_topic1_to_sub_topicn_folder_list, OneDrive_KG_note_root_directory_path = get_kg_assets_root()\n\tif TR_MODE:\n\t\tprint("Folder list:", sub_topic1_to_sub_topicn_folder_list)\n\t\tprint("OneDrive KG root directory_path:",\n\t\t\t  OneDrive_KG_note_root_directory_path)\n\tOneDrive_KG_assets_directory_path = os.path.join(\n\t\tOneDrive_KG_note_root_directory_path, "assets")\n\tif TR_MODE:\n\t\tprint("OneDrive KG assets directory_path:",\n\t\t\t  OneDrive_KG_assets_directory_path)\n\tdirs = [directory for directory in os.listdir(OneDrive_KG_assets_directory_path) if os.path.isdir(\n\t\tos.path.join(OneDrive_KG_assets_directory_path, directory))]\n\tif TR_MODE:\n\t\tprint("dirs:", dirs)\n\treg_string = [r".+_\\d{10}", r"\\1"]\n\tfor dir in dirs:\n\t\tmatch = re.search(reg_string[0], dir)\n\t\tif match:\n\t\t\tif TR_MODE:\n\t\t\t\tprint("match.group(0):", match.group(0))\n\t\t\tkeyword_path = os.path.join(OneDrive_KG_assets_directory_path, dir)\n\t\t\tif TR_MODE:\n\t\t\t\tprint("keyword_path:", keyword_path)\n\t\t\treturn match.group(0), keyword_path\ndef get_bassets_keyword_path(current_dir=None, key_word="mc_1683793602"):\n\t\'\'\'\n\tkg and bkg 中的 bassets path\n\t\'\'\'\n\tTR_MODE = 1\n\tif current_dir is None:\n\t\tcurrent_dir = os.getcwd()\n\tkeyword_sub_topic1_to_sub_topicn_folder_list = []\n\tkeyword_sub_topic1_to_sub_topicn_folder_list.append(\n\t\tos.path.basename(current_dir))\n\tcurrent_dir = os.path.dirname(current_dir)\n\twhile True:\n\t\tif \'assets\' in os.listdir(current_dir):\n\t\t\tkeyword_sub_topic1_to_sub_topicn_folder_list.reverse()\n\t\t\tkeyword_sub_topic1_to_sub_topicn_folder_list.insert(1, key_word)\n\t\t\treturn keyword_sub_topic1_to_sub_topicn_folder_list, current_dir\n\t\telse:\n\t\t\tkeyword_sub_topic1_to_sub_topicn_folder_list.append(\n\t\t\t\tos.path.basename(current_dir))\n\t\t\tcurrent_dir = os.path.dirname(current_dir)\ndef get_Topic_in_kg_assets(TR_MODE=0):\n\tassets_sub_topic1_to_sub_topicn_folder_list, OneDrive_KG_note_root_directory_path = get_kg_assets_root()\n\tif TR_MODE:\n\t\tprint("assets_sub_topic1_to_sub_topicn_folder_list:",\n\t\t\t  assets_sub_topic1_to_sub_topicn_folder_list)\n\t\tprint("OneDrive KG root directory_path:",\n\t\t\t  OneDrive_KG_note_root_directory_path)\n\tTopic = os.path.basename(OneDrive_KG_note_root_directory_path)\n\tif TR_MODE:\n\t\tprint("Topic:", Topic)\n\tnum_topic = len(assets_sub_topic1_to_sub_topicn_folder_list)\n\treg_sub1 = [r\'\\d{3}_(.+)\', r\'\\1\']\n\tif num_topic <= 1:\n\t\traise Exception("num_topic<=1")\n\telif num_topic == 2:\n\t\tsub_topic1 = None\n\telif num_topic >= 3:\n\t\tmatch = re.search(\n\t\t\treg_sub1[0], assets_sub_topic1_to_sub_topicn_folder_list[1])\n\t\tif match:\n\t\t\tsub_topic1 = re.sub(reg_sub1[0], reg_sub1[1],\n\t\t\t\t\t\t\t\tassets_sub_topic1_to_sub_topicn_folder_list[1])\n\t\t\tif TR_MODE:\n\t\t\t\tprint("sub_topic1:", sub_topic1)\n\t\telse:\n\t\t\traise Exception("sub_topic1 not found")\n\tcurrent_topic = assets_sub_topic1_to_sub_topicn_folder_list[-1]\n\tcurrent_topic = re.sub(reg_sub1[0], reg_sub1[1], current_topic)\n\treturn Topic, sub_topic1, current_topic\ndef get_b_KG_directory_path(path=None):\n\tif path is None:\n\t\tpath = os.getcwd()\n\tif path.find("OneDrive") == -1 or path.find("KG") == -1:\n\t\traise Exception("This script is only for use with OneDrive/KG.")\n\t# if path.find("assets") ==-1:\n\t#\t raise Exception("current path is not an assets path.")\n\t# reg_search=[r\'(.+\\\\OneDrive\\\\KG\\\\)(.+)\']\n\treg_search = [\n\t\t[r\'.+\\\\OneDrive\\\\KG\\\\(.+)\', r\'C:\\\\BaiduSyncdisk\\\\assets\\\\\\1\']]\n\ttest2 = r\'C:\\BaiduSyncdisk\\assets\\O\\O1\\O17\\O172\\Multivaribale_calculus_Khan_Academy\\assets\\bvids\\mc_1683793602\\001_\\005_\'\n\ttest = r\'C:\\Users\\shade\\OneDrive\\KG\\O\\O1\\O17\\O172\\Multivaribale_calculus_Khan_Academy\\assets\\001_Thinking about multivariable functions\\005_Transformations\\003_Transformations, part 3\'\n\t# print(path)\n\tmatch1 = re.search(reg_search[0][0], path)\n\tif match1:\n\t\tpath_b_assets = re.sub(reg_search[0][0], reg_search[0][1], path)\n\t\t# print(path_b_assets)\n\t\treturn path_b_assets\ndef get_OneDrive_KG_note_path(OneDrive_KG_root, sub_topic1_to_sub_topicn_folder_list):\n\tOneDrive_KG_note_path = OneDrive_KG_root\n\tfor i in range(2, len(sub_topic1_to_sub_topicn_folder_list)-1):\n\t\tOneDrive_KG_note_path = os.path.join(\n\t\t\tOneDrive_KG_note_path, sub_topic1_to_sub_topicn_folder_list[i])\n\tprint(OneDrive_KG_note_path)\n\treturn OneDrive_KG_note_path\ndef get_current_bvid_name(path=None):\n\tif path is None:\n\t\tpath = os.getcwd()\n\tfile = os.path.basename(path)\n\treturn file+".mp4"\ndef get_bvids_destination_long(sub_topic1_to_sub_topicn_folder_list, BaiduSyncdisk_assets_root):\n\tpath_temp = BaiduSyncdisk_assets_root\n\tfor i in range(len(sub_topic1_to_sub_topicn_folder_list)-1):\n\t\tpath_temp = os.path.join(\n\t\t\tpath_temp, sub_topic1_to_sub_topicn_folder_list[i])\n\t\tif not os.path.exists(path_temp):\n\t\t\tos.makedirs(path_temp)\n\treturn path_temp\ndef get_assets_root_path(current_dir=None):\n\tif current_dir is None:\n\t\tcurrent_dir = os.getcwd()\n\twhile True:\n\t\tif \'assets\' in os.listdir(current_dir):\n\t\t\treturn current_dir, os.path.basename(current_dir)\n\t\telse:\n\t\t\tcurrent_dir = os.path.dirname(current_dir)\n\t\t\tif current_dir == \'\':\n\t\t\t\traise Exception(\'assets folder not found\')\ndef create_output_directory(root=None):\n\tif root is None:\n\t\troot = os.getcwd()\n\toutput_dir = os.path.join(root, \'output\')\n\tif not os.path.exists(output_dir):\n\t\tos.mkdir(output_dir)\n\t# print("Created output directory %s" % output_dir)\n\treturn output_dir\ndef create_new_file_name(file):\n\tif not file.endswith(\'.md\'):\n\t\tfilename_without_ext = os.path.splitext(file)[0]\n\t\tnew_file_name = filename_without_ext+\'.md\'\n\telse:\n\t\tnew_file_name = file\n\tprint(new_file_name)\n\treturn new_file_name\ndef create_excalidraw_file_based_on_content(content=None, path=None):\n\twrite_string = """\n---\nexcalidraw-plugin: parsed\ntags: [excalidraw]\n---\n==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠==\n%%\n# Drawing\n```json\n{"type":"excalidraw","version":2,"source":"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/1.9.19","elements":[],"appState":{"gridSize":null,"viewBackgroundColor":"#ffffff"}}\n```\n%%\n"""\n\text = ".excalidraw" + ".md"\n\tcreate_file_based_on_content(\n\t\twrite_string, ext, content, path)\ndef create_drawio_file_based_on_content(content=None, path=None):\n\twrite_string = """\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="0px" width="0px" viewBox="-10 -10 20 20" content="&lt;mxGraphModel dx=&quot;801&quot; dy=&quot;859&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&lt;root&gt;&lt;mxCell id=&quot;0&quot;/&gt;&lt;mxCell id=&quot;1&quot; parent=&quot;0&quot;/&gt;&lt;/root&gt;&lt;/mxGraphModel&gt;"><style type="text/css"></style></svg>\n"""\n\text = ".drawio.svg"\n\tcreate_file_based_on_content(\n\t\twrite_string, ext, content, path)\ndef create_file_based_on_content(write_string="", ext="", content=None, path=None):\n\tif content is None:\n\t\tcontent = pyperclip.paste()\n\tif path is None:\n\t\tpath = os.getcwd()\n\tif len(content) > 100:\n\t\traise ValueError("Content length exceeds 100 characters")\n\tif len(content) < 1:\n\t\traise ValueError("Content length is less than 1 character")\n\tif content.count("\\n") > 2:\n\t\traise TypeError("Content contains more than 2 newline characters")\n\tcontent = content.replace(\'\\n\', \' \')\n\tcontent = content.replace(\'\\r\', \' \')\n\treg = [r"\\s{2,}", r\' \']\n\tcontent = re.sub(reg[0], reg[1], content)\n\ttimestamp = str(int(time.time()))\n\tnew_name = content.strip() + "_" + timestamp+ext\n\twith open(os.path.join(path, new_name), "w", encoding="utf-8") as file:\n\t\tfile.write(write_string)\ndef rename_index_folder_files(base_dir=None):\n\tif base_dir is None:\n\t\tbase_dir = os.getcwd()\n\t# Ensure the path is absolute\n\tbase_dir = os.path.abspath(base_dir)\n\t# Iterate through the subdirectories under the base directory\n\tfor subdir in os.listdir(base_dir):\n\t\tsubdir_path = os.path.join(base_dir, subdir)\n\t\tif os.path.isdir(subdir_path):\n\t\t\t# Ensure the subdirectory name is numeric before proceeding\n\t\t\tif subdir.isnumeric():\n\t\t\t\t# Format the subdirectory name with leading zeros\n\t\t\t\tformatted_subdir = f"{int(subdir):04d}"\n\t\t\t\t# Use glob to find all .mp4 files in the subdirectory\n\t\t\t\tmp4_files = glob.glob(os.path.join(subdir_path, "*.mp4"))\n\t\t\t\t# Rename each .mp4 file\n\t\t\t\tfor mp4_file in mp4_files:\n\t\t\t\t\tbasename = os.path.basename(mp4_file)\n\t\t\t\t\tnew_name = f"{formatted_subdir}_{basename}"\n\t\t\t\t\tnew_path = os.path.join(base_dir, new_name)\n\t\t\t\t\tos.rename(mp4_file, new_path)\ndef rename_bilibili_subs(path=None):\n\t\'\'\' 重命名下载的字幕，改成视频名\'\'\'\n\tif path is None:\n\t\tpath = os.getcwd()\n\tfiles_mp4 = glob.glob(os.path.join(path, "*.mp4"))\n\tfiles_srt = glob.glob(os.path.join(path, "*.srt"))\n\tfor file_mp4 in files_mp4:\n\t\tbasename = os.path.basename(file_mp4)\n\t\tnew_name = f"{basename.split(\'.\')[0]}.srt"\n\t\tnew_path = os.path.join(path, new_name)\n\t\tfor file_srt in files_srt:\n\t\t\tmp4 = (basename.split(\'.\')[0]).split(\'_\')[1]\n\t\t\tif mp4 in file_srt:\n\t\t\t\tos.rename(file_srt, new_path)\n'",
