"markmind.py": "'import os\nimport logging\nimport file_operations_utils\nimport time\nimport urllib.parse\nimport re\n# Set up logging\nlogging.basicConfig(level=logging.DEBUG)\n# Constants\nTR_MODE = True\nASSETS_FOLDER_NAME = "assets"\ndef get_annotator_id(file_name):\n\tfile_name_temp = file_name.replace(" ", "_")\n\treturn file_name_temp + "_" + str(int(time.time())), file_name_temp\ndef get_annotate_image_target_path(path):\n\ttry:\n\t\treturn path.split("KG\\\\")[1]\n\texcept IndexError:\n\t\tlogging.error("Invalid path format")\n\t\treturn None\ndef create_annotator(path=None):\n\tif path is None:\n\t\tpath = os.getcwd()\n\tfiles_annotator = [f for f in os.listdir(\n\t\tpath) if f.endswith(\'_annotator.md\')]\n\t# get bassets folder path\n\tbig_assets_path = file_operations_utils.get_b_KG_directory_path(path)\n\tif big_assets_path is None:\n\t\traise FileNotFoundError(\n\t\t\t"Could not find assets folder in current folder path")\n\tif TR_MODE:\n\t\tlogging.debug("big_assets_path: %s", big_assets_path)\n\tfor root, dirs, files in os.walk(big_assets_path):\n\t\tfor file in files:\n\t\t\tif file.endswith(".pdf"):\n\t\t\t\tfile_name = os.path.splitext(file)[0]\n\t\t\t\tannotator_id, file_name_temp = get_annotator_id(file_name)\n\t\t\t\tif TR_MODE:\n\t\t\t\t\tlogging.debug("annotator_id: %s", annotator_id)\n\t\t\t\tannotate_target_path = os.path.join(root, file)\n\t\t\t\t# annotate_target_path = urllib.parse.quote(\n\t\t\t\t#\t os.path.abspath(annotate_target_path))\n\t\t\t\tannotate_image_target_full_path = os.path.join(path, "imgs")\n\t\t\t\tannotate_image_target_path = get_annotate_image_target_path(\n\t\t\t\t\tannotate_image_target_full_path)\n\t\t\t\tcontent_annotator = f"""\n---\nid: {annotator_id}\nannotate-type: pdf\nannotate-target: file://{annotate_target_path}\nannotate-image-target: {annotate_image_target_path}\n---\n"""\n\t\t\t\tannotator_file_name = f"{annotator_id}_annotator.md"\n\t\t\t\tannotator_path = os.path.join(path, annotator_file_name)\n\t\t\t\treg_anno = file_name_temp+"_"+r"\\d{10}"+"_annotator.md"\n\t\t\t\tflag = False\n\t\t\t\tfor file_annotator in files_annotator:\n\t\t\t\t\tmatch = re.search(reg_anno, file_annotator)\n\t\t\t\t\tif match:\n\t\t\t\t\t\tflag = True\n\t\t\t\tif not flag:\n\t\t\t\t\twith open(annotator_path, "w", encoding="utf-8") as f:\n\t\t\t\t\t\tf.write(content_annotator)\n# def create_annotator(path=None):\n#\t if path is None:\n#\t\t path = os.getcwd()\n#\t TR_MODE = 1\n#\t # IS "\\OneDrive\\KG\\" contained by current folder path? if not, raise error\n#\t # get bassets folder path\n#\t big_assets_path = file_operations_utils.get_b_KG_directory_path(path)\n#\t if TR_MODE:\n#\t\t print("big_assets_path:", big_assets_path)\n#\t if big_assets_path is None:\n#\t\t raise Exception("Could not find assets folder in current folder path")\n#\t for root, dirs, files in os.walk(big_assets_path):\n#\t\t for file in files:\n#\t\t\t if file.endswith(".pdf"):\n#\t\t\t\t file_name = file.split(".")[0]\n#\t\t\t\t file_name_temp = file_name.replace(" ", "_")\n#\t\t\t\t annotator_id = file_name_temp+"_"+str(int(time.time()))\n#\t\t\t\t if TR_MODE:\n#\t\t\t\t\t print("annotator_id:", annotator_id)\n#\t\t\t\t annotate_target_path = os.path.join(root, file)\n#\t\t\t\t if TR_MODE:\n#\t\t\t\t\t print("annotate_target_path:", annotate_target_path)\n#\t\t\t\t annotate_image_target_full_path = os.path.join(path, "imgs")\n#\t\t\t\t if TR_MODE:\n#\t\t\t\t\t print("annotate_image_target_full_path:",\n#\t\t\t\t\t\t   annotate_image_target_full_path)\n#\t\t\t\t # annotate_image_target_path= annotate_image_target_full_path after \\OneDrive\\KG\\\n#\t\t\t\t annotate_image_target_path = annotate_image_target_full_path.split(\n#\t\t\t\t\t "KG\\\\")[1]\n#\t\t\t\t if TR_MODE:\n#\t\t\t\t\t print("annotate_image_target_path:",\n#\t\t\t\t\t\t   annotate_image_target_path)\n#\t\t\t\t content_annotator = f"""\n# ---\n# id: {annotator_id}\n# annotate-type: pdf\n# annotate-target: file://{annotate_target_path}\n# annotate-image-target: {annotate_image_target_path}\n# ---\n# """\n#\t\t\t\t annotator_file_name = annotator_id + "_annotator"+".md"\n#\t\t\t\t annotator_path = os.path.join(path, annotator_file_name)\n#\t\t\t\t with open(annotator_path, "w", encoding="utf-8") as f:\n#\t\t\t\t\t f.write(content_annotator)\n'",
